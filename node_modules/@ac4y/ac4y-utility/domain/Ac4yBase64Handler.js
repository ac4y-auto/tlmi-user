class Ac4yBase64Handler {
    
    //encode(aString){return atob(aString);};
    //decode(aString){return btoa(aString);};
    
    //b64EncodeUnicode(aString) {
    encode(aString) {
        
    // first we use encodeURIComponent to get percent-encoded UTF-8,
    // then we convert the percent encodings into raw bytes which
    // can be fed into btoa.
        return btoa(encodeURIComponent(aString).replace(/%([0-9A-F]{2})/g,
            function toSolidBytes(match, p1) {
                return String.fromCharCode('0x' + p1);
        }));
        
    } // b64EncodeUnicode
    
    //b64DecodeUnicode(str) {
    decode(aString) {
        
    // Going backwards: from bytestream, to percent-encoding, to original string.
        return decodeURIComponent(atob(aString).split('').map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
        
    } // b64DecodeUnicode
    
} // Ac4yBase64Handler

module.exports=Ac4yBase64Handler
