class Ac4yStringHandler {

    getPersonalNamePart(aName){

            var vName = String(aName);
            var vResult = new Array(); 
            vResult = vName.split(".");
            var vResultSize = vResult.length;

            if ( vResult.length == 0 )
                    return vName;
            else
                    return vResult[vResult.length-1];

    } // getPersonalNamePart

    getFirstNamePart(aName){

            var vName = String(aName);
            var vResult = new Array(); 
            vResult = vName.split(".");
            vResultSize = vResult.length;

            if ( vResult.length == 0 )
                    return vName;
            else
                    return vResult[0];

    } // getFirstNamePart


    getLength(aString){return aString.length;}
    
    upperCase(aString){return aString.toUpperCase();}

    getFirstCharUpperCase(aString){
        
        if (aString)
            return this.upperCase(aString.charAt(0)) + aString.substring(1, this.getLength(aString));
        else
            return "";
        
    } // getFirstCharUpperCase

    replaceAll(aString, aFind, aReplace) {
        
        if (aString)
            while( aString.indexOf(aFind) > -1) {
                  aString = aString.replace(aFind, aReplace);
            } 
        
        return aString;
              
    } // replaceAll

    camelCase(aInput) { 

        if (aInput) {
            
            var vInput = this.replaceAll(aInput, ' ', '-');

            return vInput.toLowerCase().replace(/-(.)/g, function(match, group1) {
                    return group1.toUpperCase();
            });
            
        }
        
    } // camelCase

    concatSmart(aFirst, aSecond, aSeparator) { 

            if (aFirst)
                return aFirst + aSeparator + aSecond;
            else
                return aSecond;

    } // concatSmart

    
    padLeft(aValue, aPadder, aLength){return (aPadder+aValue).slice(-aLength);}

    padNumber(aNumber, aLength){return ("0"+aNumber).slice(-aLength);}

    getValueFromKeyValuePairByKey(aPair, aSeparator, aKey){
        
        var vValue = null;
        
        if (aPair) {
            
            var vKeyValueInArray=aPair.split(aSeparator);
			
            if (vKeyValueInArray.length==2)
                vValue = vKeyValueInArray[1];
            
        }

        return vValue;

    } // getValueFromKeyValuePairByKey

    getValueFromKeyValuePair(aPair, aSeparator){
        
        var vResult = null;
        
        if (aPair) {
            
            var vKeyValueInArray=aPair.split(aSeparator);
			
            if (vKeyValueInArray.length==2)
                vResult = vKeyValueInArray[1];
            
        }

        return vResult;

    } // getValueFromKeyValuePair

    getKeyFromKeyValuePair(aPair, aSeparator){
        
        var vResult = null;
        
        if (aPair) {
            
            var vKeyValueInArray=aPair.split(aSeparator);
			
            if (vKeyValueInArray.length==2)
                vResult = vKeyValueInArray[0];
            
        }

        return vResult;

    } // getKeyFromKeyValuePair
    
    getKeyValueFromSeries(aStorage, aKeyValueSeparator, aValueSeparator, aKey){
        
        var vValue = null;
        
        if (aStorage) {
            
            var vKeyValueSet = aStorage.split(aKeyValueSeparator);
            
            var vKeyValue=vKeyValueSet.map(
                    function(aElement){
                        return aElement.trim().split(aValueSeparator);
                    }).filter(
                            function(aElement){
                                return aElement[0]===aKey;
                            }
                );

                if (vKeyValue.length>0)
                    vValue = vKeyValue[0][1];
            
        }
        
        return vValue;
        
    } // getKeyValueFromSeries
    
    getSimpled (text) {

        const 	accentForm 			= "ĂˇĂ­Ĺ±Ĺ‘ĂĽĂ¶ĂşĂłĂ©Ă�ĂŤĹ°Ĺ�ĂśĂ–ĂšĂ“Ă‰";
        const 	withoutAccentForm 	= "aiuououoeAIUOUOUOE";

        var	oneChar;
        var 	converted	= "";
        var		conversionIndex = 0;

        for ( var index = 0; index < text.length; index++ ) {

            oneChar = text.charAt ( index );

            conversionIndex = accentForm.indexOf ( oneChar );

            if	( conversionIndex != -1 )
                oneChar = withoutAccentForm.charAt ( conversionIndex );

            if 	(  
                    (oneChar == '.') ||
                    ((oneChar >= 'a') && (oneChar <= 'z')) ||
                    ((oneChar >= '0') && (oneChar <= '9')) ||
                    ((oneChar >= 'A') && (oneChar <= 'Z'))
            )
                converted = converted + oneChar;

        }

        return converted.toUpperCase();

    } // getSimpled
    
    stringFromArray(data) {
        
        var count = data.length;
        var str = "";

        for(var index = 0; index < count; index += 1)
          str += String.fromCharCode(data[index]);

        return str;

    } // stringFromArray

} // Ac4yStringHandler

module.exports=Ac4yStringHandler
