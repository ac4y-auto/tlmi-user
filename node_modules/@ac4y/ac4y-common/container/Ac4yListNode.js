var Ac4yListNodeAlgebra=require("@ac4y/ac4y-common/algebra/Ac4yListNodeAlgebra.js"); 

class Ac4yListNode extends Ac4yListNodeAlgebra {
/*
	egyelore egyedi algebrďż˝t igďż˝nyel.
    rebuild(aObject, aTarget) { if (aObject) { if (aObject.element) aTarget.setElement(aObject.element);} return aTarget;}

if (object.element != undefined) target.setElement(new Array(0).rebuilded(object.element));
>
if (object.element != undefined) target.setElement(object.element.slice());
*/	
	
    constructor(aObject) {
        
        super(aObject);

        if (!this.hasElement())
            this.create();

    } // constructor 

    set(aElement){this.element = aElement;}
    get(){return this.element;}
    create(){this.set([]);};
    has(){return this.element ? true : false;}
    
    addElement(aElement){this.get().push(aElement);}
    
    delete(aIndex){
        delete this.get()[aIndex]; 
        this.set(this.getCleaned());
    } //delete

    getLength(){return this.element.length;}

    isEmpty(){return this.element.length===0 ? true : false;}
    
    getByIndex(aIndex){return this.get()[aIndex];}
    
    getElement(aElement){return this.getByIndex(this.getIndex(aElement));}
    
    getByName(aName){return this.getByIndex(this.getIndexByName(aName));}

    getFirstIndex(){return 0;}

    getLastIndex(){return this.element.length-1;}

    getFirst(){return this.get()[this.getFirstIndex()];}
    
    getLast(){return this.get()[this.getLastIndex()];}    

    doesExistByName(aName){return this.getIndexByName(aName)!==-1;}

    getIndex(aElement){

        return this.get().findIndex(
                                function(vElement){
                                    return vElement===aElement;
                                }
                            );
        
    } // getIndex

    getIndexByName(aName){

        return this.get().findIndex(
                                function(aElement){
                                    return aElement.getName()===aName;
                                }
                            );
        
    } // getIndexByName

    getIndexByGUID(aGUID){

        return this.get().findIndex(
                                function(aElement){
                                    //return aElement.getAc4yIdentification().getGUID()===aGUID;
                                    return aElement.ac4yIdentification.GUID===aGUID;
                                }
                            );
        
    } // getIndexByGUID

    getIndexByHumanId(aHumanId){

        return this.get().findIndex(
                                function(aElement){
                                    return aElement.getAc4yIdentification().getHumanId()===aHumanId;
                                }
                            );
        
    } // getIndexByName

    doesExistByGUID(aGUID){return this.getIndexByGUID(aGUID)!==-1;}

    getByGUID(aGUID){return this.getByIndex(this.getIndexByGUID(aGUID));}
    
    deleteByGUID(aGUID){return this.delete(this.getIndexByGUID(aGUID));}

    doesExistByHumanId(aHumanId){return this.getIndexByHumanId(aHumanId)!==-1;}

    getByHumanId(aHumanId){return this.getByIndex(this.getIndexByHumanId(aHumanId));}

    getOppositeIndex(aIndex){return aIndex === 0 ? 1 : 0;}

    getCleaned(){return this.get().filter(function (aElement) {return (aElement);});}

    forEach(aProcess){this.get().forEach(aProcess)};

    fetch(processor){this.forEach(processor)}

} // Ac4yListNode

module.exports=Ac4yListNode
