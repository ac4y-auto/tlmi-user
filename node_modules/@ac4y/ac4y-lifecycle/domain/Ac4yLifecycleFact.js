var Ac4yLifecycleFactAlgebra=require("../algebra/Ac4yLifecycleFactAlgebra.js");
var Ac4yDateTimeHandler=require("@ac4y/ac4y-utility/domain/Ac4yDateTimeHandler.js");

var Ac4yObjectHandler=require("@ac4y/ac4y-utility/domain/Ac4yObjectHandler.js");

class Ac4yLifecycleFact extends Ac4yLifecycleFactAlgebra {
    
    createSelf(object) {return new Ac4yLifecycleFact(object);}
    
    constructor(object){
        
        super(object);
        if (object != undefined && object === 0) return;

        if (!this.hasEntry())
            this.setEntry(new Ac4yDateTimeHandler().getSystemTime());
        
    } // constructor
    
    becomes(name){this.setName(name);}
    
    forPersistence(object){

        var object = this.objectKilledForPersistence(object);
        var object = super.forPersistence(object);
        
        object.setEntry(new Date(object.entry));
        object.setQuit(new Date(object.quit));

        //object.setCreatedAt(new Date(object.getCreatedAt()));

        return object;

    } // forPersistence     
    
} // Ac4yLifecycleFact

module.exports=Ac4yLifecycleFact
