var Ac4yEcosystemAlgebra=require("../algebra/Ac4yEcosystemAlgebra.js"); 
var Ac4yEcosystemMemberConstant=require("../constant/Ac4yEcosystemMemberConstant.js"); 
var Ac4yUserText=require("@ac4y/ac4y-usertext/domain/Ac4yUserText.js");

class Ac4yEcosystem extends Ac4yEcosystemAlgebra {
    
    constructor(object){
        
        super(object);
        if (object!=undefined && object===0) return;

        if (!this.hasMember()) this.createMember();
        
    } // constructor

    createSelf(object) {return new Ac4yEcosystem(object);}

    noEcosystem(object) {

        object = object || this;
        
        delete object.ecosystem;

        return object;

    } // noEcosystem
    
    messenger(){return this.getMember().get(new Ac4yEcosystemMemberConstant().MESSENGER);};
    log(){return this.getMember().get(new Ac4yEcosystemMemberConstant().LOG);};
    UI(){return this.getMember().get(new Ac4yEcosystemMemberConstant().UI);};
    logic(){return this.getMember().get(new Ac4yEcosystemMemberConstant().LOGIC);};
    commander(){return this.getMember().get(new Ac4yEcosystemMemberConstant().COMMANDER);};
    service(){return this.getMember().get(new Ac4yEcosystemMemberConstant().SERVICE);};
    api(){return this.getMember().get(new Ac4yEcosystemMemberConstant().API);};
    parameter(){return this.getMember().get(new Ac4yEcosystemMemberConstant().PARAMETER);};
    hibernator(){return this.getMember().get(new Ac4yEcosystemMemberConstant().HIBERNATOR);};
    persistor(){return this.getMember().get(new Ac4yEcosystemMemberConstant().PERSISTOR);};
    environment(){return this.getMember().get(new Ac4yEcosystemMemberConstant().ENVIRONMENT);};
    session(){return this.getMember().get(new Ac4yEcosystemMemberConstant().SESSION);};
    conductor(){return this.getMember().get(new Ac4yEcosystemMemberConstant().CONDUCTOR);};
    server(){return this.getMember().get(new Ac4yEcosystemMemberConstant().SERVER);};
    client(){return this.getMember().get(new Ac4yEcosystemMemberConstant().CLIENT);};
    interpreter(){return this.getMember().get(new Ac4yEcosystemMemberConstant().INTERPRETER);};
    flow(){return this.getMember().get(new Ac4yEcosystemMemberConstant().FLOW);};
    gate(){return this.getMember().get(new Ac4yEcosystemMemberConstant().GATE);};
    container(){return this.getMember().get(new Ac4yEcosystemMemberConstant().CONTAINER);};

    setEcosystemInMembers(){
        
        Object.keys(this.getMember().getStore()).map( (objectKey, index) => {
            var element = (this.getMember().getStore()[objectKey]).setEcosystem(this);
        });

    }; // setEcosystemInMembers

    existingMember(key){return this.getMember().exists(key);}
/*
    addMember(aMember){this.getMember().addElement(aMember);}
    addService(aClassID, aService){this.getMember().addService(aClassID, aService);}
    addInstance(aClassID, aObjectID, aInstance){this.getMember().addInstance(aClassID, aObjectID, aInstance);}
*/

    checkCommandManager(){if (!this.commander()) throw new Ac4yUserText().text("has no command manager!");}
    checkServiceManager(){if (!this.service()) throw new Ac4yUserText().text("has no service manager!");}

    checkMember(member){
        if (!this.existingMember(member)) 
            throw new Ac4yUserText().text("has no")
                +" " + member + " " 
                + new Ac4yUserText().text("ecosystem member!");
    } // checkMember
    
} // Ac4yEcosystem

module.exports=Ac4yEcosystem
