var Ac4yService=require("./Ac4yService.js");
var GetObjectResponse=require("../document/GetObjectResponse.js");
var Ac4yProcessResult=require("./Ac4yProcessResult.js");

class Ac4yRunAsService extends Ac4yService {

    async execute(process, request, name) {

        this.getAc4yIdentification().setHumanId(name);

        var response = await process(request, this);

        if (!process)
            throw "undefined process in Ac4yRunAsService.execute"

        this.death();

        this.calculateTimesOnHistories();

        this.setIndicator("running time", this.tryGetRunningTime());        

        this.dimensionsSimplifying();
        this.indicatorSetSimplifying()

        delete this.duration;
        delete this.timer;
        delete this.liveIndicator
        delete this.GUID;
        delete this.ac4yIdentification.template;
        //this.killIdentification()

        response.setDimension(this.getDimension())
        response.setIndicatorSet(this.getIndicatorSet())
        response.setSubset(this.getSubset())

        response.killIdentification()

        return response;

    } // execute

} // Ac4yRunAsService 

module.exports=Ac4yRunAsService
